webpackJsonp([4],{10:function(e,t){e.exports=require("crypto")},101:function(e,t){e.exports=require("buffer")},102:function(e,t){e.exports=require("dgram")},103:function(e,t){e.exports=require("dns")},104:function(e,t){e.exports=require("events")},105:function(e,t){e.exports=require("string_decoder")},106:function(e,t){e.exports=require("zlib")},13:function(e,t){e.exports=require("util")},139:function(e,t,n){"use strict";var o=n(267);const a=e=>({type:o.a,command:e});t.c=a;const s=(e,t,n)=>({type:o.b,command:e,id:t,dataChunk:n});t.d=s;const r=(e,t)=>({type:o.c,command:e,id:t});t.e=r;const i=()=>({type:o.d});t.j=i;const c=()=>({type:o.e});t.k=c;const d=e=>({type:o.f,command:e});t.l=d;const m=e=>({type:o.g,walletPassword:e});t.f=m;const l=()=>({type:o.h});t.m=l;const u=()=>({type:o.i});t.h=u;const p=()=>({type:o.j});t.i=p;const f=()=>({type:o.k});t.g=f;const h=()=>({type:o.l});t.a=h;const w=()=>({type:o.m});t.b=w},14:function(e,t){e.exports=require("path")},140:function(e,t,n){"use strict";var o=n(14),a=n.n(o),s=n(98),r=n.n(s),i=n(81),c=n.n(i),d=n(7),m=(n.n(d),n(35)),l=n.n(m),u=n(23),p=n.n(u),f=n(18),h=(n.n(f),n(268));const w=f.remote.app,g=()=>new Promise((e,t)=>{r.a.stat(SiaAPI.config.attr("siac").path,n=>{n?t(n):-1!==a.a.basename(SiaAPI.config.attr("siac").path).indexOf("siac")?e():t({message:"Invalid binary name."})})}),v=()=>g().catch(()=>{SiaAPI.config.attr("siac",{path:a.a.resolve(a.a.dirname(SiaAPI.config.attr("siad").path),"win32"===process.platform?"./siac.exe":"./siac")});g().catch(()=>{SiaAPI.config.attr("siac")||SiaAPI.config.attr("siac",{path:""});SiaAPI.showError({title:"Siac not found",content:"Sia-UI couldn't locate siac. Please navigate to siac."});const e=SiaAPI.openFile({title:"Please locate siac.",properties:["openFile"],defaultPath:a.a.join("..",SiaAPI.config.attr("siac").path||"./"),filters:[{name:"siac",extensions:["*"]}]});e?-1===a.a.basename(e[0]).indexOf("siac")?SiaAPI.showError({title:"Invalid Binary Name",content:"The siac binary must be called siac. Restart the plugin to choose a valid binary."}):SiaAPI.config.attr("siac",{path:e[0]}):SiaAPI.showError({title:"Siac not found",content:"This plugin will be unusable until a proper siac binary is found."})});SiaAPI.config.save()});t.a=v;const y=function(e,t){const n=e.replace(/\s*\s/g," ").trim().split(" ");return"./siac"!==n[0]&&"siac"!==n[0]||n.shift(),t.findIndex(t=>t.reduce((e,t,o)=>e&&t===n[o],!0)&&-1===e.indexOf("-h"))};t.c=y;const C=function(e,t){const n=e.replace(/\s*\s/g," ").trim().split(" ");"./siac"!==n[0]&&"siac"!==n[0]||n.shift();for(const o of t){if(n[0]!==o)return console.log(`ERROR: getArgumentString failed, string: ${e}, did not contain command: ${t.join(" ")}`),"";n.shift()}let o=n.indexOf("-a");return-1===o&&(o=n.indexOf("--address")),-1!==o&&n.splice(o,2),n.join(" ")};t.d=C;const P=function(e,t,o){let a=e.replace(/\s*\s/g," ").trim();const s=n.i(d.Map)({command:a,result:"",id:o,stat:"running"});t.addCommand(s),a.startsWith("siac")?a=a.slice(4).trim():a.startsWith("./siac")&&(a=a.slice(6).trim());let r=a.split(" ");-1===r.indexOf("-a")&&-1===r.indexOf("--address")&&SiaAPI.config.attr("address")&&(r=r.concat(["-a",SiaAPI.config.attr("address")]));const i=c.a.spawn(SiaAPI.config.attr("siac").path,r,{cwd:w.getPath("downloads")}),m=function(e){const n=e.toString().replace(/stty: stdin isn't a terminal\n/g,"");t.updateCommand(s.get("command"),s.get("id"),n)};i.stdout.on("data",m),i.stderr.on("data",m);let l=!1;const u=function(){l||(t.endCommand(s.get("command"),s.get("id")),l=!0)};return i.on("error",e=>{m(`Error running command: ${e.message}.
Is your siac path correct?`);u()}),i.on("close",()=>{u()}),document.getElementsByClassName("command-history-list")[0].offsetHeight<180&&t.hideCommandOverview(),i},E=function(e,t,o){let a=e;const s=e.replace(/\s*\s/g," ").trim();a.startsWith("siac")?a=a.slice(4).trim():a.startsWith("./siac")&&(a=a.slice(6).trim());const r=a.split(" ");let i=p.a.parse("http://localhost:9980");if(-1===r.indexOf("-a")&&-1===r.indexOf("--address"))SiaAPI.config.attr("address")&&(i=p.a.parse("http://"+SiaAPI.config.attr("address")));else{let e=r.indexOf("-a");-1===e&&(e=r.indexOf("--address")),e<r.length-1&&(i=p.a.parse("http://"+r[e+1])),r.splice(e,2),a=r.join(" ")}let c="";if("wallet unlock"===a)c="/wallet/unlock";else if("wallet load seed"===a)c="/wallet/seed";else if(a.includes("wallet load 033x",0))c="/wallet/033x";else if(a.includes("wallet load siag",0))c="/wallet/siagkey";else if("wallet init-seed --force"===a)c="/wallet/init/seed?force=true";else{if(!a.includes("wallet init-seed",0))return P(a,t).stdin;c="/wallet/init/seed"}const m=n.i(d.Map)({command:s,result:"",id:o,stat:"running"});t.addCommand(m);let u="";const f=function(e){u+=e.toString()};let h=!1;const w=function(e){if(!h){try{u=JSON.parse(u).message}catch(e){}e&&e.statusCode>=200&&e.statusCode<=299&&(u+="Success"),t.updateCommand(m.get("command"),m.get("id"),u),t.endCommand(m.get("command"),m.get("id")),h=!0}};document.getElementsByClassName("command-history-list")[0].offsetHeight<180&&t.hideCommandOverview();const g={hostname:i.hostname,port:i.port,path:c,method:"POST",headers:{"User-Agent":"Sia-Agent","Content-Type":"application/x-www-form-urlencoded"}},v=l.a.request(g,e=>{e.on("data",f);e.on("end",()=>w(e))});return v.on("error",e=>{f(e.message);w()}),v};t.b=E;const S=function(e,t,o,a,s){const r=e.target;if(13===e.keyCode)switch(y(o,h.a)){case h.b:P(o,t,s);break;case h.c:case h.d:case h.e:case h.f:t.showWalletPrompt();break;case h.g:t.showSeedPrompt();break;case h.h:case h.i:{a?t.hideCommandOverview():t.showCommandOverview();const e=n.i(d.Map)({command:"help",result:"",id:s});t.addCommand(e),t.endCommand(e.get("command"),e.get("id"));break}}else 38===e.keyCode?(t.loadPrevCommand(r.value),setTimeout(()=>{r.setSelectionRange(r.value.length,r.value.length)},0)):40===e.keyCode&&(t.loadNextCommand(r.value),setTimeout(()=>{r.setSelectionRange(r.value.length,r.value.length)},0))};t.e=S},177:function(e,t){e.exports=require("constants")},18:function(e,t){e.exports=require("electron")},23:function(e,t){e.exports=require("url")},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(79),a=(n.n(o),n(18)),s=(n.n(a),n(1)),r=n.n(s),i=n(49),c=n(14),d=n.n(c);const m=a.remote.dialog,l=a.remote.getCurrentWindow(),u=a.remote.getGlobal("config"),p=u.siad,f=a.remote.require("fs");let h=!1;const w=(e=0)=>new Promise(t=>setTimeout(t,e));window.onload=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(a,s){try{var r=t[a](s),i=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}return o("next")})}}(function*(){const e=n(47);let t=function(){};const a=function(){let n="Siad exited unexpectedly for an unknown reason.";try{n=f.readFileSync(d.a.join(p.datadir,"siad-output.log"),{encoding:"utf-8"})}catch(e){console.error("error reading error log: "+e.toString())}document.body.innerHTML='<div style="width:100%;height:100%;" id="crashdiv"></div>',e.render(r.a.createElement(i.a,{errorMsg:n,startSiad:t}),document.getElementById("crashdiv"))};for(t=function(){const e=o.launch(p.path,{"sia-directory":p.datadir,"rpc-addr":p.rpcaddr,"host-addr":p.hostaddr,"api-addr":p.address,modules:"cghrtw"});e.on("error",a),e.on("close",a),e.on("exit",a),window.siadProcess=e};;){const e=yield o.isRunning(p.address);e&&h&&(h=!1,window.location.reload()),e||h||(h=!0,a()),yield w(2e3)}}),window.SiaAPI={call:function(e,t){o.call(p.address,e).then(e=>t(null,e)).catch(e=>t(e,null))},config:u,hastingsToSiacoins:o.hastingsToSiacoins,siacoinsToHastings:o.siacoinsToHastings,openFile:e=>m.showOpenDialog(l,e),saveFile:e=>m.showSaveDialog(l,e),showMessage:e=>m.showMessageBox(l,e),showError:e=>m.showErrorBox(e.title,e.content)}},267:function(e,t,n){"use strict";t.a="ADD_COMMAND";t.b="UPDATE_COMMAND";t.c="END_COMMAND";t.d="LOAD_PREV_COMMAND";t.e="LOAD_NEXT_COMMAND";t.f="SET_CURRENT_COMMAND";t.g="SET_WALLET_PASSWORD";t.h="SHOW_WALLET_PROMPT";t.i="HIDE_WALLET_PROMPT";t.j="SHOW_SEED_PROMPT";t.k="HIDE_SEED_PROMPT";t.l="SHOW_COMMAND_OVERVIEW";t.m="HIDE_COMMAND_OVERVIEW"},268:function(e,t,n){"use strict";t.b=-1;t.f=0;t.g=1;t.c=2;t.d=3;t.e=4;t.h=5;t.i=6;const o=[["wallet","load","seed"],["wallet","init-seed"],["wallet","unlock"],["wallet","load","033x"],["wallet","load","siag"],["help"],["?"]];t.a=o},35:function(e,t){e.exports=require("http")},36:function(e,t){e.exports=require("stream")},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n.n(o),s=n(47),r=n.n(s),i=n(507),c=n(4),d=n(3),m=(n.n(d),n(519)),l=n(140);const u=n.i(c.createStore)(m.a),p=a.a.createElement(d.Provider,{store:u},a.a.createElement(i.a,null));n.i(l.a)(),r.a.render(p,document.getElementById("react-root"))},43:function(e,t){e.exports=require("assert")},48:function(e,t){e.exports=require("querystring")},49:function(e,t,n){"use strict";var o=n(2),a=n.n(o),s=n(1),r=n.n(s),i=n(18);n.n(i);const c={display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"#C6C6C6",width:"100%",height:"100%"},d={height:"300px",width:"80%",overflow:"auto",marginBottom:"15px"},m={color:"blue",cursor:"pointer"},l=()=>{i.shell.openExternal("https://github.com/NebulousLabs/Sia/issues")},u=({errorMsg:errorMsg,startSiad:startSiad})=>r.a.createElement("div",{style:c},r.a.createElement("h2",null,"Siad has exited unexpectedly. Please submit a bug report including the error log ",r.a.createElement("a",{style:m,onClick:l},"here.")),r.a.createElement("h2",null," Error Log: "),r.a.createElement("textarea",{style:d,readOnly:!0},errorMsg),r.a.createElement("button",{onClick:startSiad},"Start Siad"));u.propTypes={errorMsg:a.a.string.isRequired,startSiad:a.a.func.isRequired},t.a=u},507:function(e,t,n){"use strict";var o=n(1),a=n.n(o),s=n(515);const r=()=>a.a.createElement("div",{className:"app"},a.a.createElement(s.a,null));t.a=r},508:function(e,t,n){"use strict";var o=n(2),a=n.n(o),s=n(1),r=n.n(s),i=n(7);n.n(i);class c extends r.a.Component{componentDidUpdate(){this._commandHistoryList.scrollTop=this._commandHistoryList.scrollHeight}render(){const e=this.props.commandHistory.filterNot(e=>"help"===e.get("command")||"?"===e.get("command")).map((e,t)=>r.a.createElement("li",{key:t},r.a.createElement("h3",null,e.get("command"),r.a.createElement("i",{className:"fa fa-cog fa-spin "+("running"===e.get("stat")?"":"hide")})),r.a.createElement("p",null,e.get("result"))));return r.a.createElement("div",{className:"command-history-list",ref:e=>this._commandHistoryList=e},r.a.createElement("ul",null,e))}}t.a=c,c.propTypes={commandHistory:a.a.instanceOf(i.List)}},509:function(e,t,n){"use strict";var o=n(1),a=n.n(o),s=n(140);class r extends a.a.Component{componentDidUpdate(){this.props.showWalletPrompt||this.props.showSeedPrompt||this._input.focus()}render(){const e=e=>this.props.actions.setCurrentCommand(e.target.value),t=e=>n.i(s.e)(e,this.props.actions,this.props.currentCommand,this.props.showCommandOverview,this.props.commandHistory.size);return a.a.createElement("input",{id:"command-input",onChange:e,onKeyDown:t,type:"text",value:this.props.currentCommand,autoFocus:!0,autoComplete:!0,ref:e=>this._input=e})}}t.a=r},510:function(e,t,n){"use strict";var o=n(1),a=n.n(o),s=n(513),r=n(514),i=n(517),c=n(516);const d=({showCommandOverview:showCommandOverview,actions:actions})=>{const e=()=>{showCommandOverview?actions.hideCommandOverview():actions.showCommandOverview()};return a.a.createElement("div",{className:"command-history "+(showCommandOverview?"overview":"")},a.a.createElement(s.a,null),a.a.createElement("footer",{className:"commandFooter"},a.a.createElement("div",{className:"command-overview "+(showCommandOverview?"expanded":"")},a.a.createElement("div",{className:"help-button",onClick:e},"?"),a.a.createElement("div",{className:"command-overview-inner"},a.a.createElement("h3",null,"Available Commands:"),a.a.createElement("p",null,"consensus   Print the current state of consensus",a.a.createElement("br",null),"gateway     Perform gateway actions",a.a.createElement("br",null),"host        Perform host actions",a.a.createElement("br",null),"hostdb      View or modify the host database",a.a.createElement("br",null),"miner       Perform miner actions",a.a.createElement("br",null),"renter      Perform renter actions",a.a.createElement("br",null),"stop        Stop the Sia daemon",a.a.createElement("br",null),"update      Update Sia",a.a.createElement("br",null),"version     Print version information",a.a.createElement("br",null),"wallet      Perform wallet actions",a.a.createElement("br",null),a.a.createElement("br",null),"Use '[command] --help' for more information about a command.",a.a.createElement("br",null)))),a.a.createElement(r.a,null)),a.a.createElement(i.a,null),a.a.createElement(c.a,null))};t.a=d},511:function(e,t,n){"use strict";var o=n(1),a=n.n(o),s=n(140),r=n(48),i=n.n(r);class c extends a.a.Component{componentDidUpdate(){this.props.showSeedPrompt&&this._seedPasswd.focus()}render(){const e=e=>{if(13===e.keyCode){const t=n.i(s.b)(this.props.currentCommand,this.props.actions,this.props.commandHistory.size);t.write(i.a.stringify({encryptionpassword:this.props.walletPassword,seed:e.target.value,dictionary:"english"})),t.end(),e.target.value="",this.props.actions.setWalletPassword(""),this.props.actions.hideSeedPrompt()}};return a.a.createElement("div",{id:"seed-prompt",className:"modal "+(this.props.showSeedPrompt?"":"hidden")},a.a.createElement("div",{className:"modal-message"},a.a.createElement("h3",null,"New seed"),a.a.createElement("p",null,"Please type your new seed and press enter to continue."),a.a.createElement("input",{onKeyDown:e,type:"password",id:"seed-passwd",ref:e=>this._seedPasswd=e})))}}t.a=c},512:function(e,t,n){"use strict";var o=n(1),a=n.n(o),s=n(48),r=n.n(s),i=n(140),c=n(268);class d extends a.a.Component{componentDidUpdate(){this.props.showWalletPrompt&&this._walletPasswd.focus()}render(){const e=e=>this.props.actions.setWalletPassword(e.target.value),t=e=>{if(13===e.keyCode){const e=n.i(i.b)(this.props.currentCommand,this.props.actions,this.props.commandHistory.size);let t;switch(n.i(i.c)(this.props.currentCommand,c.a)){case c.f:this.props.actions.showSeedPrompt();break;case c.d:t={source:n.i(i.d)(this.props.currentCommand,c.a[c.d]),encryptionpassword:this.props.walletPassword};case c.e:t=t||{keyfiles:n.i(i.d)(this.props.currentCommand,c.a[c.e]),encryptionpassword:this.props.walletPassword},e.write(r.a.stringify(t)),e.end(),this.props.actions.setWalletPassword("");break;default:e.write(r.a.stringify({encryptionpassword:this.props.walletPassword})),e.end(),this.props.actions.setWalletPassword("")}this.props.actions.hideWalletPrompt()}};return a.a.createElement("div",{id:"wallet-prompt",className:"modal "+(this.props.showWalletPrompt?"":"hidden")},a.a.createElement("div",{className:"modal-message"},a.a.createElement("h3",null,"Wallet Password"),a.a.createElement("p",null,"Please type your wallet password and press enter to continue."),a.a.createElement("input",{onChange:e,onKeyDown:t,type:"password",id:"wallet-passwd",ref:e=>this._walletPasswd=e,value:this.props.walletPassword})))}}t.a=d},513:function(e,t,n){"use strict";var o=n(508),a=n(3);n.n(a);const s=e=>({commandHistory:e.commandLineReducer.get("commandHistory")}),r=n.i(a.connect)(s)(o.a);t.a=r},514:function(e,t,n){"use strict";var o=n(509),a=n(3),s=(n.n(a),n(4)),r=n(139);const i=e=>({currentCommand:e.commandLineReducer.get("currentCommand"),commandIndex:e.commandLineReducer.get("commandIndex"),showCommandOverview:e.commandLineReducer.get("showCommandOverview"),commandRunning:e.commandLineReducer.get("commandRunning"),commandHistory:e.commandLineReducer.get("commandHistory"),showWalletPrompt:e.commandLineReducer.get("showWalletPrompt"),showSeedPrompt:e.commandLineReducer.get("showSeedPrompt")}),c=e=>({actions:n.i(s.bindActionCreators)({addCommand:r.c,updateCommand:r.d,endCommand:r.e,loadPrevCommand:r.j,loadNextCommand:r.k,setCurrentCommand:r.l,showWalletPrompt:r.m,hideWalletPrompt:r.h,showSeedPrompt:r.i,hideSeedPrompt:r.g,showCommandOverview:r.a,hideCommandOverview:r.b},e)}),d=n.i(a.connect)(i,c)(o.a);t.a=d},515:function(e,t,n){"use strict";var o=n(510),a=n(3),s=(n.n(a),n(4)),r=n(139);const i=e=>({showCommandOverview:e.commandLineReducer.get("showCommandOverview")}),c=e=>({actions:n.i(s.bindActionCreators)({showCommandOverview:r.a,hideCommandOverview:r.b},e)}),d=n.i(a.connect)(i,c)(o.a);t.a=d},516:function(e,t,n){"use strict";var o=n(511),a=n(3),s=(n.n(a),n(4)),r=n(139);const i=e=>({showSeedPrompt:e.commandLineReducer.get("showSeedPrompt"),currentCommand:e.commandLineReducer.get("currentCommand"),commandHistory:e.commandLineReducer.get("commandHistory"),walletPassword:e.commandLineReducer.get("walletPassword")}),c=e=>({actions:n.i(s.bindActionCreators)({addCommand:r.c,updateCommand:r.d,endCommand:r.e,setWalletPassword:r.f,hideSeedPrompt:r.g,hideCommandOverview:r.b},e)}),d=n.i(a.connect)(i,c)(o.a);t.a=d},517:function(e,t,n){"use strict";var o=n(512),a=n(3),s=(n.n(a),n(4)),r=n(139);const i=e=>({showWalletPrompt:e.commandLineReducer.get("showWalletPrompt"),currentCommand:e.commandLineReducer.get("currentCommand"),commandHistory:e.commandLineReducer.get("commandHistory"),walletPassword:e.commandLineReducer.get("walletPassword")}),c=e=>({actions:n.i(s.bindActionCreators)({addCommand:r.c,updateCommand:r.d,endCommand:r.e,setWalletPassword:r.f,hideWalletPrompt:r.h,showSeedPrompt:r.i,hideCommandOverview:r.b},e)}),d=n.i(a.connect)(i,c)(o.a);t.a=d},518:function(e,t,n){"use strict";function o(e=r,t){switch(t.type){case s.a:return e.set("commandHistory",e.get("commandHistory").push(t.command)).set("commandIndex",0).set("currentCommand","").set("commandRunning",!0);case s.b:{const n=e.get("commandHistory").findLastEntry(e=>e.get("command")===t.command&&e.get("id")===t.id);if(!n)return e;const[o,a]=n,s=a.set("result",a.get("result")+t.dataChunk);return e.set("commandHistory",e.get("commandHistory").set(o,s))}case s.c:{const n=e.get("commandHistory").findLastEntry(e=>e.get("command")===t.command&&e.get("id")===t.id);if(!n)return e;const[o,a]=n,s=a.set("stat","done");return e.set("commandHistory",e.get("commandHistory").set(o,s)).set("commandRunning",!1)}case s.d:{const t=Math.min(e.get("commandIndex")+1,e.get("commandHistory").size);return e.set("commandIndex",t).set("currentCommand",e.get("commandHistory").get(Math.min(e.get("commandHistory").size-t,e.get("commandHistory").size-1)).get("command"))}case s.e:{const t=Math.max(e.get("commandIndex")-1,0);return t?e.set("commandIndex",t).set("currentCommand",e.get("commandHistory").get(e.get("commandHistory").size-t).get("command")):e.set("commandIndex",t).set("currentCommand","")}case s.f:return e.set("currentCommand",t.command);case s.g:return e.set("walletPassword",t.walletPassword);case s.h:return e.set("showWalletPrompt",!0);case s.i:return e.set("showWalletPrompt",!1);case s.j:return e.set("showSeedPrompt",!0);case s.k:return e.set("showSeedPrompt",!1);case s.l:return e.set("showCommandOverview",!0);case s.m:return e.set("showCommandOverview",!1);default:return e}}t.a=o;var a=n(7),s=(n.n(a),n(267));const r=n.i(a.Map)({commandHistory:n.i(a.List)([]),currentCommand:"",commandIndex:0,showWalletPrompt:!1,showSeedPrompt:!1,showCommandOverview:!1,commandRunning:!1,walletPassword:""})},519:function(e,t,n){"use strict";var o=n(4),a=n(518);const s=n.i(o.combineReducers)({commandLineReducer:a.a});t.a=s},55:function(e,t){e.exports=require("fs")},61:function(e,t){e.exports=require("https")},71:function(e,t){e.exports=require("net")},72:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=72},81:function(e,t){e.exports=require("child_process")},82:function(e,t){e.exports=require("punycode")},83:function(e,t){e.exports=require("tls")},84:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=84},990:function(e,t,n){n(37),n(26),e.exports=n(379)}},[990]);