webpackJsonp([6],{10:function(e,t){e.exports=require("crypto")},101:function(e,t){e.exports=require("buffer")},102:function(e,t){e.exports=require("dgram")},103:function(e,t){e.exports=require("dns")},104:function(e,t){e.exports=require("events")},105:function(e,t){e.exports=require("string_decoder")},106:function(e,t){e.exports=require("zlib")},13:function(e,t){e.exports=require("util")},14:function(e,t){e.exports=require("path")},177:function(e,t){e.exports=require("constants")},18:function(e,t){e.exports=require("electron")},23:function(e,t){e.exports=require("url")},35:function(e,t){e.exports=require("http")},36:function(e,t){e.exports=require("stream")},374:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,i){try{var s=t[r](i),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){o("next",e)},function(e){o("throw",e)});e(c)}return o("next")})}}function r(e){const t=n.i(l.a)(p,m);let o;for(let e=0;e<t.size;e++){const r=(()=>{if("Logs"===n.i(l.b)(t.get(e)))return n.i(l.c)(t.get(e),!0,"Ctrl+Shift+L");return n.i(l.c)(t.get(e))})();n.i(l.b)(t.get(e))===m&&(o=r)}const r=()=>{n.i(l.d)(m);o.removeEventListener("dom-ready",r);e()};o.addEventListener("dom-ready",r)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=n.n(i),c=n(79),a=(n.n(c),n(421)),u=n(18),l=(n.n(u),n(422));const d=u.remote.app,f=u.remote.getCurrentWindow(),p=s.a.join(d.getAppPath(),"./plugins"),m="Files",h=u.remote.getGlobal("config");window.closeToTray=f.closeToTray;const y=(()=>{var e=o(function*(){n.i(l.e)();const e=document.getElementsByClassName("overlay")[0],t=e.getElementsByClassName("centered")[0].getElementsByTagName("p")[0],o=h.attr("siad");if(e.style.display="inline-flex",t.textContent="Quitting Sia...",void 0!==window.siadProcess){setTimeout(function(){return window.siadProcess.kill("SIGKILL")},15e3),c.call(o.address,"/daemon/stop");const e=function(e){try{return process.kill(e,0),!0}catch(e){return!1}},t=function(e=0){return new Promise(function(t){return setTimeout(t,e)})};for(;e(window.siadProcess.pid);)yield t(200)}f.destroy()});return function(){return e.apply(this,arguments)}})();u.ipcRenderer.on("quit",o(function*(){yield y()}));let g=!1;window.onbeforeunload=(()=>{if(window.closeToTray)return!1===f.isVisible()?(f.restore(),y(),!1):("linux"===process.platform?f.hide():f.minimize(),"win32"!==process.platform||g||(f.tray.displayBalloon({title:"Sia-UI information",content:"Sia is still running.  Right click this tray icon to quit or restore Sia."}),g=!0),!1);y();return!1}),window.onload=function(){n.i(a.a)(r)}},421:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,i){try{var s=t[r](i),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){o("next",e)},function(e){o("throw",e)});e(c)}return o("next")})}}var r=n(18),i=(n.n(r),n(79)),s=(n.n(i),n(14)),c=n.n(s),a=n(1),u=n.n(a),l=n(47),d=n.n(l),f=n(423);const p=r.remote.dialog,m=r.remote.app,h=r.remote.require("fs"),y=r.remote.getGlobal("config"),g=y.attr("siad"),w=document.getElementById("loading-spinner"),b=document.getElementsByClassName("overlay")[0],v=b.getElementsByClassName("centered")[0].getElementsByTagName("p")[0],x=document.getElementById("errorlog");v.textContent="Loading Sia...";const E=e=>{v.style.display="none";x.textContent="A critical error loading Sia has occured: "+e;x.style.display="inline-block";w.style.display="none"},S=(e,t)=>{v.innerHTML=e;const n=(()=>{var e=o(function*(){try{const e=yield i.call(g.address,{timeout:500,url:"/consensus"}),t=yield i.call(g.address,{timeout:500,url:"/gateway"});d.a.render(u.a.createElement(f.a,{peers:t.peers.length,synced:e.synced,blockheight:e.height}),document.getElementById("statusbar")),yield new Promise(function(e){return setTimeout(e,5e3)})}catch(e){yield new Promise(function(e){return setTimeout(e,500)}),console.error("error updating sync status: "+e.toString())}n()});return function(){return e.apply(this,arguments)}})();n();t(()=>{b.style.display="none"})},q=()=>new Promise(e=>{h.stat(g.path,t=>{e(t?!1:!0)})}),k=()=>{try{const e=h.readFileSync(c.a.join(g.datadir,"siad-output.log"));E("Siad unexpectedly exited. Error log: "+e)}catch(e){E("Siad unexpectedly exited.")}};t.a=(()=>{function e(e){return t.apply(this,arguments)}var t=o(function*(e){try{h.statSync(g.datadir)}catch(e){h.mkdirSync(g.datadir)}if(yield i.isRunning(g.address))return void S("Welcome back",e);if((yield q(g.path))||(g.path=y.defaultSiadPath),!(yield q(g.path))){p.showErrorBox("Siad not found","Sia-UI couldn't locate siad.  Please navigate to siad.");const e=p.showOpenDialog({title:"Please locate siad.",properties:["openFile"],defaultPath:c.a.join("..",g.path),filters:[{name:"siad",extensions:["*"]}]});void 0===e&&m.quit(),g.path=e[0]}try{const e=i.launch(g.path,{"sia-directory":g.datadir,"rpc-addr":g.rpcaddr,"host-addr":g.hostaddr,"api-addr":g.address,modules:"cghrtw"});e.on("error",function(e){return E("Siad couldnt start: "+e.toString())}),e.on("close",k),e.on("exit",k),window.siadProcess=e}catch(e){return void E(e.toString())}setTimeout(function(){"Loading Sia..."===v.textContent&&(v.innerHTML='Loading can take a while after upgrading to a new version. Check the <a style="text-decoration: underline; cursor: pointer" id="releasenotelink">release notes</a> for more details.',document.getElementById("releasenotelink").onclick=function(){r.shell.openExternal("https://github.com/NebulousLabs/Sia/releases")})},3e4);for(;!1===(yield i.isRunning(g.address));)yield function(e=0){return new Promise(function(t){return setTimeout(t,e)})}(500);window.siadProcess.removeAllListeners("error"),window.siadProcess.removeAllListeners("exit"),window.siadProcess.removeAllListeners("close"),S("Welcome to Sia",e)});return e})()},422:function(e,t,n){"use strict";var o=n(7),r=(n.n(o),n(14)),i=n.n(r),s=n(98),c=n.n(s),a=n(18);n.n(a);const u=e=>{const t=document.createElement("img");t.src=e;t.className="pure-u icon";return t},l=e=>{const t=document.createElement("div");t.innerText=e;t.className="pure-u text";return t},d=(e,t)=>{const n=document.createElement("webview");n.id=t+"-view";n.className="webview";n.src=e;n.nodeintegration=!0;return n},f=(e,t)=>{a.remote.app.on("browser-window-blur",()=>{a.remote.globalShortcut.unregister(e)});a.remote.app.on("browser-window-focus",()=>{a.remote.globalShortcut.register(e,t)});a.remote.globalShortcut.register(e,t)},p=e=>{const t=document.querySelectorAll(".current");for(const e in t)void 0!==t[e].classList&&t[e].classList.remove("current");const n=document.getElementById(e+"-view");null!==n&&n.classList.add("current");n.focus();const o=document.getElementById(e+"-button");null!==o&&o.classList.add("current");a.remote.globalShortcut.unregister("Ctrl+Shift+P");a.remote.app.removeAllListeners("browser-window-blur");a.remote.app.removeAllListeners("browser-window-focus");f("Ctrl+Shift+P",()=>{n.openDevTools()})};t.d=p;const m=(e,t)=>{const n=document.createElement("div");n.id=t+"-button";n.className="pure-u-1-1 button";n.appendChild(u(e));n.appendChild(l(t));n.onclick=(()=>p(t));return n},h=e=>i.a.basename(e);t.b=h;const y=(e,t=!1,n)=>{const o=h(e);const r=i.a.join(e,"index.html");const s=i.a.join(e,"assets","button.png");const c=d(r,o);const a=m(s,o);void 0!==n&&f(n,()=>{p(o)});t||document.getElementById("sidebar").appendChild(a);document.getElementById("mainbar").appendChild(c);return c};t.c=y;const g=()=>{const e=document.getElementById("mainbar");const t=document.getElementById("sidebar");e.parentNode.removeChild(e);t.parentNode.removeChild(t)};t.e=g;const w=e=>{let t=n.i(o.List)(c.a.readdirSync(e));t=t.map(t=>i.a.join(e,t));t=t.filter(e=>{const t=i.a.join(e,"index.html");try{return c.a.statSync(t),!0}catch(t){console.error("plugin "+e+" has an invalid structure")}return!1});return t},b=(e,t)=>e.sort(e=>h(e)===t?1:0),v=(e,t)=>e.sort(e=>h(e)===t?-1:0),x=(e,t)=>{let n=w(e);n=b(n,"Terminal");n=b(n,"About");n=v(n,t);return n};t.a=x},423:function(e,t,n){"use strict";var o=n(2),r=n.n(o),i=n(1),s=n.n(i);const c=()=>{const e=new Date(1492126189e3);const t=Math.abs(new Date-e)/1e3/60;const n=1e5+t/9;return Math.floor(n+.5)},a=e=>Math.min(e/c()*100,99.9),u=({synced:synced,blockheight:blockheight,peers:peers})=>{const e=a(blockheight);const t={color:"#E0000B"};const n={width:e.toString()+"%",height:"20px",transition:"width 200ms",backgroundColor:"#00CBA0",margin:"0"};const o={display:"inline-block",backgroundColor:"#eee",height:"20px",width:"150px"};const r={display:"inline-block",position:"absolute",fontSize:"12px",height:"25px",marginTop:"5px"};let i;synced||0!==peers?!synced&&peers>0?(t.color="#E7D414",i="Synchronizing"):synced&&0===peers?(t.color="#E0000B",i="No Peers"):synced&&(t.color="#00CBA0",i="Synchronized"):(t.color="#E0000B",i="Not Synchronizing");let c=s.a.createElement("div",{className:"status-bar-blockheight"},"Block Height: ",blockheight);!synced&&e<99.9&&(c=s.a.createElement("div",null,s.a.createElement("div",{style:o},s.a.createElement("div",{style:n})),s.a.createElement("div",{style:r},Math.floor(10*e)/10,"%")));return s.a.createElement("div",{className:"status-bar"},s.a.createElement("div",{style:t},s.a.createElement("i",{className:"fa fa-globe fa-2x"}),i),c)};u.propTypes={synced:r.a.bool.isRequired,blockheight:r.a.number.isRequired,peers:r.a.number.isRequired},t.a=u},43:function(e,t){e.exports=require("assert")},48:function(e,t){e.exports=require("querystring")},55:function(e,t){e.exports=require("fs")},61:function(e,t){e.exports=require("https")},71:function(e,t){e.exports=require("net")},72:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=72},81:function(e,t){e.exports=require("child_process")},82:function(e,t){e.exports=require("punycode")},83:function(e,t){e.exports=require("tls")},84:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=84},985:function(e,t,n){n(37),e.exports=n(374)}},[985]);